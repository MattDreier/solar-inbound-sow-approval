@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light mode colors */
    --color-bg: 250 249 245;              /* #faf9f5 - Warm off-white */
    --color-surface: 249 250 251;         /* gray-50 */
    --color-card: 255 255 255;            /* white */
    --color-border: 229 231 235;          /* gray-200 */
    --color-hover: 243 244 246;           /* gray-100 */

    --color-text-primary: 17 24 39;       /* gray-900 */
    --color-text-secondary: 75 85 99;     /* gray-600 */
    --color-text-tertiary: 107 114 128;   /* gray-500 */
    --color-text-muted: 156 163 175;      /* gray-400 */

    /* Commission section - Light mode */
    --color-commission-bg: 253 242 248;   /* pink-50 */
    --color-commission-border: 251 207 232; /* pink-200 */
    --color-commission-text: 21 128 61;   /* green-700 - dark green for light mode */

    /* Legacy variables for body */
    --background: rgb(250, 249, 245);
    --foreground: rgb(17, 24, 39);

    /* Header dimensions - Single source of truth for sticky positioning */
    --header-padding-y: 10px;           /* py-2.5 = 0.625rem = 10px */
    --header-content-height: 58px;      /* h-[58px] on inner container */
    --header-border-width: 1px;         /* Border thickness when scrolled */

    /* Calculate where the VISIBLE header bar ends (not the element with padding) */
    /* Visible bar: starts at padding-top, ends at padding-top + content-height */
    --header-visible-bottom: calc(var(--header-padding-y) + var(--header-content-height)); /* 68px */

    /* Sticky CTA offset: visible header bottom + 1 border-width gap */
    --sticky-cta-offset: calc(var(--header-visible-bottom) + var(--header-border-width)); /* 69px */
  }

  .dark {
    /* Dark mode colors (existing) */
    --color-bg: 24 24 25;                 /* #181819 */
    --color-surface: 26 26 26;            /* #1a1a1a */
    --color-card: 31 31 31;               /* #1f1f1f */
    --color-border: 42 42 42;             /* #2a2a2a */
    --color-hover: 36 36 36;              /* #242424 */

    --color-text-primary: 250 250 250;    /* #fafafa */
    --color-text-secondary: 229 229 231;  /* #e5e5e7 */
    --color-text-tertiary: 215 216 224;   /* #d7d8e0 */
    --color-text-muted: 140 142 153;      /* #8c8e99 */

    /* Commission section - Dark mode */
    --color-commission-bg: 45 27 46;      /* #2d1b2e */
    --color-commission-border: 74 45 75;  /* #4a2d4b */
    --color-commission-text: 74 222 128;  /* green-400 - light green for dark mode */

    /* Legacy variables for body */
    --background: rgb(24, 24, 25);
    --foreground: rgb(250, 250, 250);
  }
}

* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-figtree), -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
}

/* Custom scrollbar for dark theme */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--background);
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #3a3a3e;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Grafit-inspired utilities */
  .section-number {
    @apply text-light-muted text-sm font-semibold tracking-wider;
  }

  .gradient-border {
    position: relative;
  }

  .gradient-border::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, #3b82f6 0%, #a855f7 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* ═══════════════════════════════════════════════════════════════════════════
     GLOW ANIMATIONS - Hollywood-style amber pulse variants
     Click the dot to cycle through these animations
     ═══════════════════════════════════════════════════════════════════════════ */

  /* Shared glow values for consistency */
  :root {
    --glow-dim:
      0 0 2px 0.5px rgba(234, 179, 8, 0.4),
      0 0 5px 1.5px rgba(234, 179, 8, 0.2),
      0 0 8px 2px rgba(234, 179, 8, 0.1);
    --glow-medium:
      0 0 5px 1.5px rgba(234, 179, 8, 0.7),
      0 0 10px 3.5px rgba(234, 179, 8, 0.45),
      0 0 16px 5px rgba(234, 179, 8, 0.25);
    --glow-bright:
      0 0 7px 2.5px rgba(234, 179, 8, 1),
      0 0 16px 6px rgba(234, 179, 8, 0.7),
      0 0 26px 9px rgba(234, 179, 8, 0.45);
    --glow-off:
      0 0 1px 0px rgba(234, 179, 8, 0.2),
      0 0 2px 0.5px rgba(234, 179, 8, 0.1),
      0 0 3px 1px rgba(234, 179, 8, 0.05);
  }

  /* 1. BREATHING - Slow organic pulse like something alive */
  @keyframes glow-breathing {
    0%, 100% { box-shadow: var(--glow-dim); }
    20% { box-shadow: 0 0 6px 2px rgba(234, 179, 8, 0.9), 0 0 14px 5px rgba(234, 179, 8, 0.6), 0 0 22px 7px rgba(234, 179, 8, 0.35); }
    28% { box-shadow: var(--glow-bright); }
    35% { box-shadow: 0 0 5px 1.5px rgba(234, 179, 8, 0.75), 0 0 12px 4px rgba(234, 179, 8, 0.5), 0 0 20px 6px rgba(234, 179, 8, 0.3); }
    40% { box-shadow: 0 0 6px 2px rgba(234, 179, 8, 0.85), 0 0 13px 5px rgba(234, 179, 8, 0.55), 0 0 21px 7px rgba(234, 179, 8, 0.32); }
    55% { box-shadow: 0 0 4px 1px rgba(234, 179, 8, 0.6), 0 0 9px 3px rgba(234, 179, 8, 0.35), 0 0 14px 4px rgba(234, 179, 8, 0.18); }
  }

  /* 2. HEARTBEAT - Medical monitor double-beat with flat line */
  @keyframes glow-heartbeat {
    0%, 100% { box-shadow: var(--glow-off); }
    /* First beat - sharp spike */
    8% { box-shadow: var(--glow-off); }
    10% { box-shadow: var(--glow-bright); }
    14% { box-shadow: var(--glow-off); }
    /* Second beat - slightly smaller */
    18% { box-shadow: var(--glow-off); }
    20% { box-shadow: var(--glow-medium); }
    24% { box-shadow: var(--glow-off); }
    /* Long flatline pause */
  }

  /* 3. BEACON - Warning light with pause (lighthouse/emergency) */
  @keyframes glow-beacon {
    0%, 100% { box-shadow: var(--glow-off); }
    /* Sharp flash on */
    5% { box-shadow: var(--glow-bright); }
    /* Hold bright */
    15% { box-shadow: var(--glow-bright); }
    /* Quick fade */
    25% { box-shadow: var(--glow-off); }
    /* Long pause before next rotation */
  }

  /* 4. REACTOR - Sci-fi power core with random-feeling flares */
  @keyframes glow-reactor {
    0%, 100% { box-shadow: var(--glow-medium); }
    /* Constant medium glow with periodic flares */
    15% { box-shadow: var(--glow-medium); }
    18% { box-shadow: var(--glow-bright); }
    22% { box-shadow: var(--glow-medium); }
    50% { box-shadow: var(--glow-medium); }
    52% { box-shadow: 0 0 8px 3px rgba(234, 179, 8, 1), 0 0 20px 8px rgba(234, 179, 8, 0.8), 0 0 35px 12px rgba(234, 179, 8, 0.5); }
    56% { box-shadow: var(--glow-medium); }
    75% { box-shadow: var(--glow-dim); }
    78% { box-shadow: var(--glow-medium); }
  }

  /* 5. EMERGENCY - Fast urgent pulse */
  @keyframes glow-emergency {
    0%, 100% { box-shadow: var(--glow-dim); }
    25% { box-shadow: var(--glow-bright); }
    50% { box-shadow: var(--glow-dim); }
    75% { box-shadow: var(--glow-bright); }
  }

  /* 6. CANDLE - Organic flicker like a flame */
  @keyframes glow-candle {
    0% { box-shadow: var(--glow-medium); }
    5% { box-shadow: var(--glow-dim); }
    10% { box-shadow: var(--glow-medium); }
    15% { box-shadow: 0 0 6px 2px rgba(234, 179, 8, 0.85), 0 0 12px 4px rgba(234, 179, 8, 0.55), 0 0 18px 6px rgba(234, 179, 8, 0.3); }
    20% { box-shadow: var(--glow-medium); }
    25% { box-shadow: var(--glow-bright); }
    30% { box-shadow: var(--glow-medium); }
    35% { box-shadow: var(--glow-dim); }
    40% { box-shadow: var(--glow-medium); }
    45% { box-shadow: var(--glow-medium); }
    50% { box-shadow: var(--glow-dim); }
    55% { box-shadow: var(--glow-medium); }
    60% { box-shadow: var(--glow-bright); }
    65% { box-shadow: var(--glow-medium); }
    70% { box-shadow: var(--glow-dim); }
    75% { box-shadow: var(--glow-medium); }
    80% { box-shadow: 0 0 6px 2px rgba(234, 179, 8, 0.9), 0 0 14px 5px rgba(234, 179, 8, 0.6), 0 0 22px 7px rgba(234, 179, 8, 0.35); }
    85% { box-shadow: var(--glow-medium); }
    90% { box-shadow: var(--glow-dim); }
    95% { box-shadow: var(--glow-medium); }
    100% { box-shadow: var(--glow-medium); }
  }

  /* Animation classes */
  .animate-glow-breathing {
    animation: glow-breathing 4.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  .animate-glow-heartbeat {
    animation: glow-heartbeat 2s ease-in-out infinite;
  }

  .animate-glow-beacon {
    animation: glow-beacon 3s ease-out infinite;
  }

  .animate-glow-reactor {
    animation: glow-reactor 4s ease-in-out infinite;
  }

  .animate-glow-emergency {
    animation: glow-emergency 1s ease-in-out infinite;
  }

  .animate-glow-candle {
    animation: glow-candle 3s ease-in-out infinite;
  }

  /* Default glow (backwards compatibility) */
  .animate-glow {
    animation: glow-breathing 4.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  }

  /* Fade in for tooltips */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateX(-4px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .animate-fade-in {
    animation: fadeIn 0.15s ease-out forwards;
  }

  /* Arrow bump animation - pulls back left then shoots right like a slingshot */
  @keyframes bump-right {
    0% {
      transform: translateX(0);
    }
    35% {
      transform: translateX(-20px);
    }
    65% {
      transform: translateX(28px);
    }
    85% {
      transform: translateX(-3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  .animate-bump-right {
    animation: bump-right 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
  }

}

/* Respect user's motion preferences for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Ensure smooth scrolling is disabled */
  html {
    scroll-behavior: auto !important;
  }
}
